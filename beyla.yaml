discovery:
  services:
    - open_ports: "1-65535"

  exclude_services:
    - exe_path: ".*/vector$"

  exclude_otel_instrumented_services: false

otel_metrics_export:
  features: []             # disables groups like application, network
  instrumentations: []     # disables http, grpc, sql, etc

prometheus_export:
  port: 0

network:
  enable: false

otel_traces_export:
  # Required to create trace spans for database operations
  instrumentations:
    - "*"

ebpf:
  # Without this, Beyla only detects MySQL/PostgreSQL binary protocols
  # Enable to capture SQL from ORMs, connection poolers, or other databases
  heuristic_sql_detect: true
  
  # Required for tracking prepared statements which use numeric IDs instead of SQL text
  mysql_prepared_statements_cache_size: 100
  
  # Without adequate buffer size, long SQL queries get truncated
  # 4096 bytes captures most queries without excessive memory usage
  buffer_sizes:
    mysql: 4096
    postgres: 4096

attributes:
  select:
    traces:
      include:
        - "db.query.text"
